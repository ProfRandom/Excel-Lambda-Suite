/* LIST_KINSHIP
   Purpose:
   Classifies the semantic relationship between two lists, including directional containment and structural similarity.

   Inputs:
   - listA : The primary list (frame of reference)
   - listB : The secondary list (evaluated relative to listA)

   Returns:
   - One of the following relationship labels:
     "VOID", "ORPHAN", "SINGLE", "PROCEED" (placeholder for future logic)

   Notes:
   - Uses cleaned, flattened lists
   - All whitespace-only entries are ignored
   - This is a scaffold for phased development and testing

   Version History:
   - v1.0: Initial scaffold with EMPTINESS tier logic (VOID, ORPHAN, SINGLE)
*/

LIST_KINSHIP = LAMBDA(listA, listB,
  LET(
    // === Subroutine: Count non-blank, non-whitespace entries ===
    COUNTX, LAMBDA(arr,
      LET(
        flat, TOCOL(arr, 3),
        flags, BYROW(flat, LAMBDA(r, LEN(TRIM(r)) > 0)),
        IFERROR(SUM(--flags), 0)
      )
    ),

    // === Flatten and normalize inputs ===
    a, TOCOL(listA, 3),
    b, TOCOL(listB, 3),

    // === Get cleaned counts ===
    aCount, COUNTX(a),
    bCount, COUNTX(b),

    // === Emptiness triage ===
    result, IF(
      AND(aCount = 0, bCount = 0), "VOID",
      IF(aCount = 0, "ORPHAN",
      IF(bCount = 0, "SINGLE",
      "PROCEED"))),

    result
  )
);



